<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>8-Card Chemistry Quiz Dashboard | CHEM QUIZ 2026</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;700;800;900&amp;family=JetBrains+Mono:wght@400;700&amp;family=Space+Grotesk:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#00f5d4",
                        "primary-glow": "#00ffcc",
                        "emerald-dark": "#022c22",
                        "emerald-deep": "#011a14",
                        "obsidian": "#020608",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "Outfit", "sans-serif"],
                        "mono": ["JetBrains Mono", "monospace"]
                    },
                },
            },
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .material-symbols-outlined {
                font-variation-settings: "FILL" 1, "wght" 400, "GRAD" 0, "opsz" 24;
            }
            .glass-card {
                background: rgba(2, 44, 34, 0.7);
                backdrop-filter: blur(16px);
                border: 1px solid rgba(0, 245, 212, 0.25);
            }
            .metallic-text {
                background: linear-gradient(180deg, #ffffff 0%, #a1a1aa 50%, #71717a 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
            }
            
            /* Background with blur overlay */
            .background-container {
                position: fixed;
                inset: 0;
                z-index: -10;
                overflow: hidden;
            }
            
            .background-image {
                position: absolute;
                inset: 0;
                background-image: url('background');
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
            }
            
            .background-overlay {
                position: absolute;
                inset: 0;
                backdrop-filter: blur(8px);
                background: rgba(2, 6, 8, 0.316);
            }
            
            .glow-border {
                box-shadow: 0 0 15px rgba(0, 245, 212, 0.1);
                transition: all 0.3s ease;
            }
            .glow-border:hover {
                box-shadow: 0 0 25px rgba(0, 245, 212, 0.3);
                border-color: rgba(0, 245, 212, 0.6);
            }
            .locked-card {
                filter: grayscale(1) opacity(0.5) !important;
                pointer-events: none !important;
                position: relative;
            }
            .locked-card::after {
                content: "REACTION COMPLETE";
                position: absolute;
                inset: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: 900;
                font-size: 1.25rem;
                color: #00f5d4;
                background: rgba(0, 0, 0, 0.6);
                z-index: 20;
                transform: rotate(-5deg);
                border: 2px solid #00f5d4;
                margin: auto;
                height: fit-content;
                width: 80%;
                padding: 10px;
            }
            .custom-scrollbar::-webkit-scrollbar {
                width: 6px;
            }
            .custom-scrollbar::-webkit-scrollbar-track {
                background: rgba(255, 255, 255, 0.05);
            }
            .custom-scrollbar::-webkit-scrollbar-thumb {
                background: #00f5d4;
                border-radius: 10px;
            }
            
            .timer-warning {
                animation: pulse-warning 1s infinite;
            }
            
            .timer-danger {
                animation: pulse-danger 0.5s infinite;
            }
            
            @keyframes pulse-warning {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.7; }
            }
            
            @keyframes pulse-danger {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.5; }
            }
            
            .question-current {
                background: rgba(0, 245, 212, 0.1) !important;
                border-left: 4px solid #00f5d4 !important;
                transform: translateX(5px);
                transition: all 0.3s ease;
            }
            /* Add this to the <style> section */
            .option-image img {
                max-width: 100%;
                height: auto;
                border-radius: 8px;
                margin-top: 4px;
            }

            .question-image img {
                max-width: 100%;
                height: auto;
                border-radius: 12px;
                margin: 15px auto;
                display: block;
                border: 1px solid rgba(0, 245, 212, 0.2);
            }
            
            /* Toast notification styles */
            .toast-notification {
                position: fixed;
                top: 100px;
                right: 30px;
                z-index: 9999;
                background: rgba(2, 44, 34, 0.95);
                border: 2px solid #00f5d4;
                border-radius: 16px;
                padding: 20px;
                min-width: 300px;
                max-width: 400px;
                backdrop-filter: blur(10px);
                box-shadow: 0 0 40px rgba(0, 245, 212, 0.3);
                transform: translateX(400px);
                transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            }
            
            .toast-notification.show {
                transform: translateX(0);
            }
            
            .toast-notification.hide {
                transform: translateX(400px);
            }
        }
    </style>
</head>
<body class="font-display text-white min-h-screen overflow-x-hidden">
    <!-- Background with image and blur overlay -->
    <div class="background-container">
        <div class="background-image"></div>
        <div class="background-overlay"></div>
    </div>
    
    <!-- Toast Notification -->
    <div id="toast-notification" class="toast-notification hidden">
        <div class="flex items-center gap-4 mb-3">
            <div class="size-10 rounded-full bg-primary/20 flex items-center justify-center border border-primary/40">
                <span class="material-symbols-outlined text-primary">timer_off</span>
            </div>
            <div>
                <h3 class="text-xl font-black text-primary">TIME EXPIRED</h3>
                <p class="text-sm text-gray-300">Round automatically completed</p>
            </div>
        </div>
        <div class="h-1 w-full bg-primary/20 rounded-full overflow-hidden">
            <div id="toast-progress" class="h-full bg-primary transition-all duration-5000"></div>
        </div>
    </div>
    
    <header class="flex items-center justify-between border-b border-primary/20 px-10 py-4 bg-obsidian/90 backdrop-blur-xl sticky top-0 z-50">
        <div class="flex items-center gap-4">
            <div class="size-10 text-primary bg-emerald-dark/50 rounded-lg flex items-center justify-center border border-primary/40 shadow-[0_0_15px_rgba(0,245,212,0.2)]">
                <span class="material-symbols-outlined text-3xl">science</span>
            </div>
            <div>
                <h2 class="text-white text-xl font-black tracking-tighter uppercase leading-none italic">CHEM QUIZ 2026</h2>
                <p class="text-[9px] text-primary/80 font-mono tracking-[0.3em] uppercase mt-1">Advanced Lab Protocol</p>
            </div>
        </div>
        <div class="flex items-center gap-8">
            <div class="flex items-center gap-2">
                <div class="h-2 w-2 rounded-full bg-primary animate-pulse shadow-[0_0_8px_#00f5d4]"></div>
                <span class="text-[10px] font-mono text-primary/60 uppercase tracking-widest">System Online</span>
            </div>
            <button id="master-reset-btn" class="bg-primary/10 border border-primary/30 text-primary px-6 py-2 rounded-full text-[10px] font-black uppercase tracking-widest hover:bg-primary hover:text-obsidian transition-all">
                Master Reset
            </button>
        </div>
    </header>

    <main class="max-w-[1600px] mx-auto py-12 px-8 mb-[200px]"> <!-- Added margin-bottom of 200px -->
        <div class="text-center mb-12">
            <p class="text-primary font-mono font-bold tracking-[0.5em] uppercase text-[10px] mb-2">Protocol: 8-Card Grid Initialization</p>
            <h1 class="metallic-text text-6xl font-black tracking-tighter italic uppercase">Laboratory Round Dashboard</h1>
        </div>

        <div class="flex flex-col gap-8 items-center">
            <!-- Row 1: 3 Cards -->
            <div class="grid grid-cols-3 gap-8 w-full max-w-5xl">
                <div class="group relative h-64 glass-card rounded-2xl p-8 cursor-pointer glow-border flex flex-col items-center justify-center text-center" id="card-1">
                    <span class="material-symbols-outlined text-5xl text-primary mb-4">experiment</span>
                    <h3 class="text-2xl font-black italic tracking-tighter">CARD 1</h3>
                    <p class="text-primary/60 text-[10px] font-mono mt-2 tracking-widest">MODULE: 01</p>
                </div>
                
                <div class="group relative h-64 glass-card rounded-2xl p-8 cursor-pointer glow-border flex flex-col items-center justify-center text-center" id="card-2">
                    <span class="material-symbols-outlined text-5xl text-primary mb-4">science</span>
                    <h3 class="text-2xl font-black italic tracking-tighter">CARD 2</h3>
                    <p class="text-primary/60 text-[10px] font-mono mt-2 tracking-widest">MODULE: 02</p>
                </div>
                
                <div class="group relative h-64 glass-card rounded-2xl p-8 cursor-pointer glow-border flex flex-col items-center justify-center text-center" id="card-3">
                    <span class="material-symbols-outlined text-5xl text-primary mb-4">genetics</span>
                    <h3 class="text-2xl font-black italic tracking-tighter">CARD 3</h3>
                    <p class="text-primary/60 text-[10px] font-mono mt-2 tracking-widest">MODULE: 03</p>
                </div>
            </div>

            <!-- Row 2: 3 Cards -->
            <div class="grid grid-cols-3 gap-8 w-full max-w-5xl">
                <div class="group relative h-64 glass-card rounded-2xl p-8 cursor-pointer glow-border flex flex-col items-center justify-center text-center" id="card-4">
                    <span class="material-symbols-outlined text-5xl text-primary mb-4">coronavirus</span>
                    <h3 class="text-2xl font-black italic tracking-tighter">CARD 4</h3>
                    <p class="text-primary/60 text-[10px] font-mono mt-2 tracking-widest">MODULE: 04</p>
                </div>
                
                <div class="group relative h-64 glass-card rounded-2xl p-8 cursor-pointer glow-border flex flex-col items-center justify-center text-center" id="card-5">
                    <span class="material-symbols-outlined text-5xl text-primary mb-4">biotech</span>
                    <h3 class="text-2xl font-black italic tracking-tighter">CARD 5</h3>
                    <p class="text-primary/60 text-[10px] font-mono mt-2 tracking-widest">MODULE: 05</p>
                </div>
                
                <div class="group relative h-64 glass-card rounded-2xl p-8 cursor-pointer glow-border flex flex-col items-center justify-center text-center" id="card-6">
                    <span class="material-symbols-outlined text-5xl text-primary mb-4">water_ec</span>
                    <h3 class="text-2xl font-black italic tracking-tighter">CARD 6</h3>
                    <p class="text-primary/60 text-[10px] font-mono mt-2 tracking-widest">MODULE: 06</p>
                </div>
            </div>

            <!-- Row 3: 2 Cards -->
            <div class="grid grid-cols-2 gap-8 w-full max-w-4xl">
                <div class="group relative h-64 glass-card rounded-2xl p-8 cursor-pointer glow-border flex flex-col items-center justify-center text-center" id="card-7">
                    <span class="material-symbols-outlined text-5xl text-primary mb-4">medical_services</span>
                    <h3 class="text-2xl font-black italic tracking-tighter">CARD 7</h3>
                    <p class="text-primary/60 text-[10px] font-mono mt-2 tracking-widest">MODULE: 07</p>
                </div>
                
                <div class="group relative h-64 glass-card rounded-2xl p-8 cursor-pointer glow-border flex flex-col items-center justify-center text-center" id="card-8">
                    <span class="material-symbols-outlined text-5xl text-primary mb-4">vaccines</span>
                    <h3 class="text-2xl font-black italic tracking-tighter">CARD 8</h3>
                    <p class="text-primary/60 text-[10px] font-mono mt-2 tracking-widest">MODULE: 08</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Quiz Modal -->
    <div class="fixed inset-0 z-[100] bg-obsidian/98 backdrop-blur-3xl hidden items-center justify-center p-6" id="quiz-modal">
        <div class="w-full max-w-6xl h-[90vh] bg-emerald-deep/90 border border-primary/40 rounded-[2.5rem] shadow-[0_0_80px_rgba(0,245,212,0.2)] flex flex-col overflow-hidden relative">
            <div class="p-8 border-b border-primary/20 flex items-center justify-between bg-black/20">
                <div class="flex items-center gap-6">
                    <div class="size-14 rounded-2xl bg-primary/20 flex items-center justify-center border border-primary/40">
                        <span class="material-symbols-outlined text-4xl text-primary" id="modal-icon">science</span>
                    </div>
                    <div>
                        <h2 class="metallic-text text-5xl font-black italic uppercase tracking-tighter leading-none" id="modal-title">CARD 1</h2>
                        <p class="text-primary/60 text-xs font-mono mt-2 tracking-widest">SUBMIT ALL REACTION PHASES BEFORE TIMEOUT</p>
                    </div>
                </div>
                <div class="flex items-center gap-10">
                    <div class="flex flex-col items-center">
                        <p class="text-primary/60 text-[9px] font-black uppercase tracking-[0.3em] mb-2">Reaction Life</p>
                        <div class="flex items-center gap-2">
                            <div class="bg-black/60 border border-primary/40 px-4 py-2 rounded-xl">
                                <span class="text-4xl font-mono font-black text-primary" id="timer-display">01:30</span>
                            </div>
                        </div>
                    </div>
                    <button class="size-12 rounded-full border border-red-500/30 text-red-500 hover:bg-red-500 hover:text-white transition-all flex items-center justify-center" id="close-modal-btn">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>
            </div>
            
            <div class="flex-1 overflow-hidden flex">
                <div class="flex-1 overflow-y-auto p-12 custom-scrollbar" id="questions-container">
                    <div class="space-y-16" id="questions-list">
                        <!-- Questions will be dynamically inserted here -->
                    </div>
                </div>
                
                <div class="w-80 border-l border-primary/10 bg-black/10 p-8 flex flex-col">
                    <div class="flex-1">
                        <h4 class="text-primary font-bold text-xs uppercase tracking-widest mb-6">Progress Monitor</h4>
                        <div class="space-y-3">
                            <div class="h-1 bg-white/5 rounded-full overflow-hidden">
                                <div class="h-full bg-primary w-full transition-all duration-1000" id="timer-progress"></div>
                            </div>
                            <p class="text-[10px] text-gray-400 font-mono" id="progress-text">STABILITY: 100%</p>
                        </div>
                        <div class="mt-8">
                            <h4 class="text-primary font-bold text-xs uppercase tracking-widest mb-4">Controls</h4>
                            <div class="flex gap-3 mb-3">
                                <button id="prev-question-btn" class="flex-1 py-3 bg-primary/10 text-primary font-bold rounded-xl border border-primary/30 hover:bg-primary/20 transition-colors">
                                    <span class="material-symbols-outlined align-middle mr-2 text-sm">skip_previous</span>
                                    Previous
                                </button>
                                <button id="next-question-btn" class="flex-1 py-3 bg-primary/10 text-primary font-bold rounded-xl border border-primary/30 hover:bg-primary/20 transition-colors">
                                    <span class="material-symbols-outlined align-middle mr-2 text-sm">skip_next</span>
                                    Next
                                </button>
                            </div>
                            <button id="pause-timer-btn" class="w-full py-3 bg-primary/10 text-primary font-bold rounded-xl border border-primary/30 hover:bg-primary/20 transition-colors">
                                <span class="material-symbols-outlined align-middle mr-2 text-sm">pause</span>
                                Pause Timer
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-red-500/10 border border-red-500/20 rounded-2xl p-8">
                        <div class="flex items-center gap-3 text-red-400 mb-2">
                            <span class="material-symbols-outlined">warning</span>
                            <p class="font-bold text-sm uppercase">Manual Override</p>
                        </div>
                        <p class="text-[#92a4c9] text-xs mb-6 leading-relaxed">Closing the round before time expires will still mark it as completed.</p>
                        <button id="end-round-btn" class="w-full py-4 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 transition-colors uppercase shadow-lg shadow-red-900/20">
                            <span class="material-symbols-outlined align-middle mr-2">lock</span>
                            Close & Lock Round
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="fixed bottom-0 left-0 right-0 bg-obsidian/95 backdrop-blur-xl border-t border-primary/20 px-10 py-4 flex items-center justify-between z-50">
        <div class="flex items-center gap-4">
            <div class="flex h-3 w-3 relative">
                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary/40 opacity-75"></span>
                <span class="relative inline-flex rounded-full h-3 w-3 bg-primary"></span>
            </div>
            <p class="text-primary/60 text-[10px] font-mono font-bold uppercase tracking-widest">Lab Terminal Active</p>
        </div>
        <div class="flex items-center gap-8">
            <div class="text-right">
                <p class="text-gray-600 text-[8px] font-black uppercase tracking-widest">Current Card</p>
                <p class="text-white text-[10px] font-bold uppercase italic" id="footer-card-status">Ready for Selection</p>
            </div>
            <div class="h-8 w-px bg-white/10"></div>
            <div class="text-right">
                <p class="text-gray-600 text-[8px] font-black uppercase tracking-widest">Zone</p>
                <p class="text-white text-[10px] font-bold uppercase italic">Projector-Mode-Alpha</p>
            </div>
        </div>
    </footer>

    <script>
        // Quiz Data - 8 cards with 10 questions each (removed card 2 and 10, renumbered)
        const quizData = {
            1: {
                category: "CARD 1",
                icon: "experiment",
                questions: [
                    {
                        question: "The correct decreasing order of priority for the functional groups of organic compounds in the IUPAC system of nomenclature is",
                        options: [
                            "-COOH, -SO₃H, -CONH₂, -CHO",
                            "-SO₃H, -COOH, -CONH₂, -CHO",
                            "-CHO, -COOH, -SO₃H, -CONH₂",
                            "-CONH₂, -CHO, -SO₃H, -COOH"
                        ]
                    },
                    {
                        question: "The IUPAC name of CH₃COCH(CH₃)₂ is",
                        options: [
                            "Isopropylmethyl ketone",
                            "2-methyl-3-butanone",
                            "4-methylisopropyl ketone",
                            "3-methyl-2-butanone"
                        ]
                    },
                    {
                        question: "Lactose is a disaccharide of",
                        options: [
                            "Glucose only",
                            "Glucose and fructose",
                            "Glucose and galactose",
                            "Galactose only"
                        ]
                    },
                    {
                        question: "In lactose the reducing part is",
                        options: [
                            "Galactose",
                            "Glucose",
                            "Fructose",
                            "Mannose"
                        ]
                    },
                    {
                        question: "Positive rays or canal rays are",
                        options: [
                            "Electromagnetic waves",
                            "A stream of positively charged gaseous ions",
                            "A stream of electrons",
                            "Neutrons"
                        ]
                    },
                    {
                        question: "Rank the following types of radiations from the highest energy to the lowest.",
                        options: [
                            "X ray, UV, Microwave, IR, Visible",
                            "UV, Visible, IR, X ray, MW",
                            "IR, MW, UV, Visible, X ray",
                            "X ray, UV, Visible, IR, MW"
                        ]
                    },
                    {
                        question: "The decay modes of carbon with mass 14 and oxygen with mass 14",
                        options: [
                            "Beta decay",
                            "Positron emission",
                            "Beta decay and positron emission",
                            "Positron emission and beta decay"
                        ]
                    },
                    {
                        question: "The shape of SF₄ is",
                        options: [
                            "Tetrahedral",
                            "Trigonal bipyramidal",
                            "See saw",
                            "Square planar"
                        ]
                    },
                    {
                        question: "The pH scale was introduced by:",
                        options: [
                            "Arrhenius",
                            "Sørensen",
                            "Ostwald",
                            "Van't Hoff"
                        ]
                    },
                    {
                        question: "Which of the following is not a pesticide",
                        options: [
                            "DDT",
                            "Organophosphates",
                            "Dieldrin",
                            "Sodium arsenite"
                        ]
                    }
                ]
            },
            2: {
                category: "CARD 2",
                icon: "science",
                questions: [
                    {
                        question: "Which one of the following substituents at para-positions is most effective in stabilizing the phenoxide ion? <br><br><img src='images/31.png' alt='Question Image' style='max-width:80%; height:auto; margin-top:10px; margin-bottom:10px;'>",
                        options: [
                            "-OCH₃",
                            "-CH₂OH",
                            "-CH₃",
                            "-COCH₃"
                        ]
                    },
                    {
                        question: "How many hyperconjugatable H-atoms does CH₃CH=CH₂ molecule have? <br><br><img src='images/32.png' alt='Question Image' style='max-width:80%; height:auto; margin-top:10px; margin-bottom:10px;'>",
                        options: [
                            "0",
                            "2",
                            "3",
                            "4"
                        ]
                    },
                    {
                        question: "The chemical messengers produced in the ductless glands are",
                        options: [
                            "Vitamins",
                            "Lipids",
                            "Hormones",
                            "Antibodies"
                        ]
                    },
                    {
                        question: "Insulin is a",
                        options: [
                            "Steroid hormone",
                            "Peptide hormone",
                            "Amine hormone",
                            "None of the above"
                        ]
                    },
                    {
                        question: "Which d orbital does not have four lobes?",
                        options: [
                            "dxy",
                            "dyz",
                            "dz²",
                            "dx²-y²"
                        ]
                    },
                    {
                        question: "The pair in which ions are isoelectronic with Al³⁺",
                        options: [
                            "Br⁻ and Be⁺",
                            "Cl⁻ and Li⁺",
                            "S²⁻ and K⁺",
                            "O²⁻ and Mg²⁺"
                        ]
                    },
                    {
                        question: "The complex with crystal field stabilization energy (CFSE) of -0.4Δ is",
                        options: [
                            "[TiCl₄]",
                            "[MnCl₄]²⁻",
                            "[CoCl₄]²⁻",
                            "[CuCl₄]²⁻"
                        ]
                    },
                    {
                        question: "The complex [Co(NH₃)₅Cl]Cl₂ reacts with an aqueous solution of AgNO₃ quantitatively. The number of moles of AgCl formed per mole of the complex is",
                        options: [
                            "1",
                            "2",
                            "3",
                            "5"
                        ]
                    },
                    {
                        question: "Who discovered isotopes?",
                        options: [
                            "Soddy",
                            "Rutherford",
                            "Moseley",
                            "Aston"
                        ]
                    },
                    {
                        question: "Which of the following alkali metals emits light of the largest wavelength in the flame test?",
                        options: [
                            "Li",
                            "Na",
                            "K",
                            "Cs"
                        ]
                    }
                ]
            },
            3: {
                category: "CARD 3",
                icon: "genetics",
                questions: [
                    {
                        question: "Among the following acids which has the lowest pKa value?",
                        options: [
                            "CH₃CH₂COOH",
                            "(CH₃)₂CH-COOH",
                            "HCOOH",
                            "CH₃COOH"
                        ]
                    },
                    {
                        question: "Which of the following statements is correct about methyl group?",
                        options: [
                            "It stabilizes both carbocation and free radical equally",
                            "It stabilizes a free radical more than a carbocation",
                            "It stabilizes a carbocation more than a free radical",
                            "None of these"
                        ]
                    },
                    {
                        question: "The structure of protein that is unaffected by heating is",
                        options: [
                            "Secondary structure",
                            "Tertiary structure",
                            "Primary structure",
                            "Quaternary structure"
                        ]
                    },
                    {
                        question: "Which of the artificial sweeteners has the highest sweetness value in comparison to cane sugar?",
                        options: [
                            "Aspartame",
                            "Sucralose",
                            "Alitame",
                            "Saccharin"
                        ]
                    },
                    {
                        question: "Coffee contains caffeine, which is a/an:",
                        options: [
                            "Alkaloid",
                            "Acid",
                            "Metal",
                            "Noble Gas"
                        ]
                    },
                    {
                        question: "Stainless steel is an alloy of Iron and mostly:",
                        options: [
                            "Copper",
                            "Chromium",
                            "Gold",
                            "Silver"
                        ]
                    },
                    {
                        question: "Which transition in the hydrogen spectrum would have the same wavelength as the Balmer type transition from n=4 to n=2 of He⁺ spectrum?",
                        options: [
                            "n = 2 to n = 1",
                            "n = 1 to n = 3",
                            "n = 1 to n = 2",
                            "n = 3 to n = 4"
                        ]
                    },
                    {
                        question: "The oxidation number of sulphur in S₈, S₂F₂, H₂S respectively",
                        options: [
                            "0, +1, -2",
                            "+2, +1, -2",
                            "0, +1, +2",
                            "-2, +1, -2"
                        ]
                    },
                    {
                        question: "Who discovered the anticancer drug cisplatin?",
                        options: [
                            "Barnett Rosenberg",
                            "Pauling",
                            "Grignard",
                            "Hofmann"
                        ]
                    },
                    {
                        question: "Which of the following isomers of phosphorus is thermodynamically most stable?",
                        options: [
                            "Red",
                            "White",
                            "Black",
                            "Yellow"
                        ]
                    }
                ]
            },
            4: {
                category: "CARD 4",
                icon: "coronavirus",
                questions: [
                    {
                        question: "Isomers are compounds having the",
                        options: [
                            "Same molecular formula but different physical and/or chemical properties",
                            "Same structural formula but different molecular formula",
                            "Same chemical properties and physical properties",
                            "Same physical properties but different chemical properties"
                        ]
                    },
                    {
                        question: "The simplest alkene which is capable of exhibiting geometrical isomerism has",
                        options: [
                            "3 carbon",
                            "5 carbon",
                            "6 carbon",
                            "4 carbon"
                        ]
                    },
                    {
                        question: "Which test can be used to distinguish alcohol and phenol?",
                        options: [
                            "Tollen's test",
                            "Sodium bicarbonate test",
                            "Reaction with neutral FeCl₃",
                            "Fehling's test"
                        ]
                    },
                    {
                        question: "Aromatic aldehydes and aliphatic aldehydes can be separated by",
                        options: [
                            "Fehling's solution",
                            "Tollen's reagent",
                            "Both (a) and (b)",
                            "None of these"
                        ]
                    },
                    {
                        question: "Phosphorus has the oxidation state of +3 in",
                        options: [
                            "Phosphorus acid",
                            "Orthophosphoric acid",
                            "Hypophosphorous acid",
                            "Metaphosphoric acid"
                        ]
                    },
                    {
                        question: "Which of the following cannot act as an oxidizing agent.!",
                        options: [
                            "HNO₂",
                            "H₂O₂",
                            "H₂S",
                            "SO₂"
                        ]
                    },
                    {
                        question: "Who discovered Uranium radioactivity?",
                        options: [
                            "Becquerel",
                            "Curie",
                            "Rutherford",
                            "Soddy"
                        ]
                    },
                    {
                        question: "Which chemical is commonly used as a bleaching agent in laundry?",
                        options: [
                            "Sodium hypochlorite",
                            "Sodium chloride",
                            "Calcium carbonate",
                            "Hydrogen peroxide"
                        ]
                    },
                    {
                        question: "Which element is present in matches and responsible for ignition?",
                        options: [
                            "Phosphorus",
                            "Sulfur",
                            "Potassium",
                            "Sodium"
                        ]
                    },
                    {
                        question: "Which chemical is used as a sweetener in 'diet' soft drinks?",
                        options: [
                            "Aspartame",
                            "Sucrose",
                            "Glucose",
                            "Fructose"
                        ]
                    }
                ]
            },
            5: {
                category: "CARD 5",
                icon: "biotech",
                questions: [
                    {
                        question: "Which of the following compound will show geometrical isomerism?",
                        options: [
                            '<img src="images/61a.png" alt="Option A" style="max-width:100%; height:auto;">',
                            '<img src="images/61b.png" alt="Option B" style="max-width:100%; height:auto;">',
                            '<img src="images/61c.png" alt="Option C" style="max-width:100%; height:auto;">',
                            '<img src="images/61d.png" alt="Option D" style="max-width:100%; height:auto;">'
                        ]
                    },
                    {
                        question: "Common name of Benzene-1,2-diol is",
                        options: [
                            "Catechol",
                            "o-cresol",
                            "Quinol",
                            "Resorcinol"
                        ]
                    },
                    {
                        question: "The Prussian blue colouration obtained in the test for nitrogen in the organic compound is",
                        options: [
                            "K₄[Fe(CN)₆]",
                            "Fe₄[Fe(CN)₆]₃",
                            "Fe[Fe(CN)₆]",
                            "Fe₃[Fe(CN)₆]"
                        ]
                    },
                    {
                        question: "The separation of the constituents of a mixture by column chromatography depends upon their",
                        options: [
                            "Different solubilities",
                            "Different boiling points",
                            "Different refractive indices",
                            "Differential absorption"
                        ]
                    },
                    {
                        question: "Which of the following is not an intensive property",
                        options: [
                            "Entropy",
                            "Pressure",
                            "Temperature",
                            "Molar Volume"
                        ]
                    },
                    {
                        question: "Which of the following changes would definitely increase the internal energy of a system",
                        options: [
                            "The system gains heat and performs work",
                            "The system gains heat and has work performed on it",
                            "The system loses heat and performs work",
                            "The system loses heat and has work performed on it"
                        ]
                    },
                    {
                        question: "Who discovered chemiluminescence (luminol)?",
                        options: [
                            "H. O. Albrecht",
                            "Plunkett",
                            "Curie",
                            "Nobel"
                        ]
                    },
                    {
                        question: "Who proposed the alpha-helix structure in proteins?",
                        options: [
                            "Linus Pauling",
                            "Max Perutz",
                            "Dorothy Hodgkin",
                            "John Kendrew"
                        ]
                    },
                    {
                        question: "Who determined the structure of vitamin B12?",
                        options: [
                            "Dorothy Hodgkin",
                            "Linus Pauling",
                            "Max Perutz",
                            "John Kendrew"
                        ]
                    },
                    {
                        question: "Liquid water is denser than ice due to",
                        options: [
                            "In solid state water molecules are arranged in highly ordered open cage like structure",
                            "More extensive hydrogen bonding is present in solid state ice",
                            "The water molecules are closer in solid state of water",
                            "Water has rigid crystalline, closely packed structure in its solid state"
                        ]
                    }
                ]
            },
            6: {
                category: "CARD 6",
                icon: "water_ec",
                questions: [
                    {
                        question: "How many chiral atoms are present in <br><br><img src='images/71.png' alt='Question Image' style='max-width:80%; height:auto; margin-top:10px; margin-bottom:10px;'>",
                        options: [
                            "2",
                            "4",
                            "3",
                            "1"
                        ]
                    },
                    {
                        question: "Which reagent is used for the Clemmensen reduction of carbonyl compounds? <br><br><img src='images/72.png' alt='Question Image' style='max-width:80%; height:auto; margin-top:10px; margin-bottom:10px;'>",
                        options: [
                            "LiAlH₄",
                            "H₂/Ni",
                            "Zn-Hg/HCl",
                            "H₂/Pd"
                        ]
                    },
                    {
                        question: "A mixture of ethanol and water can be separated by",
                        options: [
                            "Fractional distillation",
                            "Azeotropic distillation",
                            "Steam distillation",
                            "Vacuum distillation"
                        ]
                    },
                    {
                        question: "Lassaigne's test is used for the detection of",
                        options: [
                            "Nitrogen and sulphur only",
                            "Nitrogen, sulphur and phosphorous",
                            "Phosphorous and halogen only",
                            "Nitrogen, sulphur, phosphorous and halogens"
                        ]
                    },
                    {
                        question: "Teflon pans are non-stick because of a polymer called PTFE. What does the 'F' stand for?",
                        options: [
                            "Ferrous",
                            "Fluorine",
                            "Formaldehyde",
                            "Fraction"
                        ]
                    },
                    {
                        question: "Why should you never put a metal fork in the microwave?",
                        options: [
                            "It turns into a magnet",
                            "It reflects microwaves, causing 'arcing' (sparks)",
                            "It melts instantly",
                            "It absorbs all the heat and freezes the food"
                        ]
                    },
                    {
                        question: "Molar heat capacity of water in equilibrium with ice at constant pressure is",
                        options: [
                            "Zero",
                            "Infinity",
                            "40.45 kJK⁻¹mol⁻¹",
                            "75.48 JK⁻¹mol⁻¹"
                        ]
                    },
                    {
                        question: "The standard hydrogen electrode potential is zero, because",
                        options: [
                            "There is no potential difference between the electrode and the solution",
                            "Hydrogen ions acquire electrons from a platinum electrode",
                            "It has been measured accurately",
                            "It has been defined that way"
                        ]
                    },
                    {
                        question: "Who discovered the proton?",
                        options: [
                            "J.J. Thomson",
                            "Ernest Rutherford",
                            "John Dalton",
                            "Frederick Soddy"
                        ]
                    },
                    {
                        question: "Which metal is used in mirrors as a reflective coating?",
                        options: [
                            "Silver",
                            "Copper",
                            "Aluminium",
                            "Iron"
                        ]
                    }
                ]
            },
            7: {
                category: "CARD 7",
                icon: "medical_services",
                questions: [
                    {
                        question: "Iodoform can be used as",
                        options: [
                            "Anaesthetic",
                            "Antiseptic",
                            "Analgesic",
                            "Antifebrin"
                        ]
                    },
                    {
                        question: "Which of the following statements is correct about retention/inversion of configuration during the course of a reaction?",
                        options: [
                            "Configuration is retained if reagent attacks from the same side of leaving group",
                            "Configuration is inverted if reagent attacks from the backside of the leaving group",
                            "No change in the configuration is possible if no bonds of the asymmetric centre are cleaved during the course of reaction",
                            "All of these"
                        ]
                    },
                    {
                        question: "Anthracene can be purified by",
                        options: [
                            "Distillation",
                            "Sublimation",
                            "Filtration",
                            "Fractional distillation"
                        ]
                    },
                    {
                        question: "Rectified spirit contains",
                        options: [
                            "95.6% ethanol and 4.4% methanol",
                            "100% ethanol",
                            "95.6% ethanol and 4.4% water",
                            "95.6% ethanol and 4.4% benzene"
                        ]
                    },
                    {
                        question: "Artificial sweetener used in soft drinks is",
                        options: [
                            "Lactose",
                            "Aspartame",
                            "Glycerol",
                            "Fructose"
                        ]
                    },
                    {
                        question: "Substance used for the preservation of coloured fruit juices is",
                        options: [
                            "Benzene",
                            "Benzoic acid",
                            "Phenol",
                            "Sodium metabisulphite"
                        ]
                    },
                    {
                        question: "Addition of catalyst in a system",
                        options: [
                            "Increases equilibrium concentrations",
                            "No effect on equilibrium concentrations",
                            "Decreases equilibrium concentrations",
                            "Increases rate of forward reaction and decreases rate of backward reaction"
                        ]
                    },
                    {
                        question: "Enzymes are known to increase the rate of reaction by",
                        options: [
                            "10² times",
                            "10⁻² times",
                            "10⁷ times",
                            "10¹² times"
                        ]
                    },
                    {
                        question: "Who introduced the concept of activation energy?",
                        options: [
                            "Arrhenius",
                            "Gibbs",
                            "Boltzmann",
                            "Planck"
                        ]
                    },
                    {
                        question: "Niacinamide (Vitamin B3) is used to:",
                        options: [
                            "Reduce hyperpigmentation",
                            "Sunscreen",
                            "Anti-acne",
                            "Hair growth"
                        ]
                    }
                ]
            },
            8: {
                category: "CARD 8",
                icon: "vaccines",
                questions: [
                    {
                        question: "Glycerine has",
                        options: [
                            "One primary and two secondary -OH groups",
                            "One secondary and two primary -OH groups",
                            "Three primary -OH groups",
                            "Three secondary -OH groups"
                        ]
                    },
                    {
                        question: "Kolbe-Schmidt reaction is used for the preparation of",
                        options: [
                            "Salicylic acid",
                            "Salicylaldehyde",
                            "Phenol",
                            "Hydrocarbon"
                        ]
                    },
                    {
                        question: "Which is the example of condensation polymer?",
                        options: [
                            "Dacron",
                            "Bakelite",
                            "Nylon-6,6",
                            "All of these"
                        ]
                    },
                    {
                        question: "In elastomer intermolecular forces are",
                        options: [
                            "Strong",
                            "Weak",
                            "Very strong",
                            "No intermolecular force"
                        ]
                    },
                    {
                        question: "Ampicillin is also called",
                        options: [
                            "Penicillin G",
                            "Penicillin V",
                            "Penicillin K",
                            "None of these"
                        ]
                    },
                    {
                        question: "Streptomycin is an example of",
                        options: [
                            "Antibiotic",
                            "Analgesic",
                            "Antipyretic",
                            "Anaesthetic"
                        ]
                    },
                    {
                        question: "Which cell has a constant voltage throughout its life?",
                        options: [
                            "Leclanche cell",
                            "Electrolytic cell",
                            "Mercury cell",
                            "Daniell cell"
                        ]
                    },
                    {
                        question: "Which of the following is true for isochoric process?",
                        options: [
                            "ΔV = 0",
                            "ΔU = q + PΔV",
                            "ΔU = qᵥ",
                            "All of these"
                        ]
                    },
                    {
                        question: "Who discovered the concept of nuclear 'magic numbers'?",
                        options: [
                            "Ernest Rutherford",
                            "Marie Curie",
                            "Maria Goeppert Mayer & J. Hans D. Jensen",
                            "Niels Bohr"
                        ]
                    },
                    {
                        question: "Which chemical is used as a sunscreen active ingredient?",
                        options: [
                            "Zinc oxide",
                            "Sodium chloride",
                            "Sodium carbonate",
                            "Calcium carbonate"
                        ]
                    }
                ]
            }
        };

        // State management
        let state = {
            activeCardId: null,
            timerInterval: null,
            timeLeft: 90, // 1 minute 30 seconds
            isTimerRunning: false,
            currentQuestionIndex: 0,
            completedRounds: []
        };
        let currentAudio = null;

        // DOM elements
        const cards = document.querySelectorAll('.glass-card');
        const quizModal = document.getElementById('quiz-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalIcon = document.getElementById('modal-icon');
        const timerDisplay = document.getElementById('timer-display');
        const timerProgress = document.getElementById('timer-progress');
        const progressText = document.getElementById('progress-text');
        const questionsList = document.getElementById('questions-list');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const pauseTimerBtn = document.getElementById('pause-timer-btn');
        const nextQuestionBtn = document.getElementById('next-question-btn');
        // DOM elements (add this line with the other DOM element declarations)
        const prevQuestionBtn = document.getElementById('prev-question-btn');
        const endRoundBtn = document.getElementById('end-round-btn');
        const masterResetBtn = document.getElementById('master-reset-btn');
        const footerCardStatus = document.getElementById('footer-card-status');
        const toastNotification = document.getElementById('toast-notification');
        const toastProgress = document.getElementById('toast-progress');

        // Initialize the application
        function init() {
            // Load completed rounds from localStorage
            const savedCompleted = localStorage.getItem('chemQuiz2026_completedRounds');
            if (savedCompleted) {
                state.completedRounds = JSON.parse(savedCompleted);
                updateCompletedCards();
            }

            // Add event listeners to cards
            cards.forEach(card => {
                card.addEventListener('click', handleCardClick);
            });

            // Add event listeners to buttons
            closeModalBtn.addEventListener('click', () => closeModal());
            pauseTimerBtn.addEventListener('click', toggleTimer);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            prevQuestionBtn.addEventListener('click', prevQuestion); // Add this line
            endRoundBtn.addEventListener('click', endRound);
            masterResetBtn.addEventListener('click', masterReset);

            // Initialize UI
            updateCompletedCards();
        }

        // Show toast notification
        function showToast(message, duration = 5000) {
            // Update toast message if needed
            if (message) {
                const toastTitle = toastNotification.querySelector('h3');
                toastTitle.textContent = message;
            }
            
            // Show toast
            toastNotification.classList.remove('hidden', 'hide');
            toastNotification.classList.add('show');
            
            // Reset and animate progress bar
            toastProgress.style.width = '0%';
            setTimeout(() => {
                toastProgress.style.width = '100%';
            }, 10);
            
            // Hide toast after duration
            setTimeout(() => {
                toastNotification.classList.remove('show');
                toastNotification.classList.add('hide');
                setTimeout(() => {
                    toastNotification.classList.add('hidden');
                }, 500);
            }, duration);
        }

        // Handle card click
        function handleCardClick(e) {
            const card = e.currentTarget;
            const cardId = card.id;
            const cardNumber = parseInt(cardId.split('-')[1]);
            
            // Don't open if card is completed
            if (state.completedRounds.includes(cardNumber)) {
                return;
            }
            
            // Stop any currently playing audio
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
            }
            
            // Set active card
            state.activeCardId = cardNumber;
            
            // Load card data
            loadCardData(cardNumber);
            
            // Show modal
            quizModal.classList.remove('hidden');
            quizModal.classList.add('flex');
            
            // Reset scroll position of questions container
            const questionsContainer = document.getElementById('questions-container');
            if (questionsContainer) {
                questionsContainer.scrollTop = 0;
            }
            
            // Update footer status
            footerCardStatus.textContent = `CARD ${cardNumber} ACTIVE`;
            
            // Reset question index
            state.currentQuestionIndex = 0;
            
            // Play countdown sound after 100ms delay
            setTimeout(() => {
                currentAudio = new Audio('90 seconds countdown timer (LED & Stars Edition) with voice over & audio FX - Craig Media Labs.mp3');
                currentAudio.play().catch(error => {
                    console.log('Audio play failed:', error);
                });
            }, 200);
            
            // Start timer automatically
            setTimeout(() => {
                startTimer();
            }, 500);
        }

        // Load card data into modal
        function loadCardData(cardNumber) {
            const data = quizData[cardNumber];
            
            if (!data) return;
            
            // Update modal title and icon
            modalTitle.textContent = data.category;
            modalIcon.textContent = data.icon;
            
            // Clear previous questions
            questionsList.innerHTML = '';
            
            // Add questions
            data.questions.forEach((questionData, index) => {
                const questionElement = document.createElement('div');
                questionElement.className = `space-y-6 ${index === 0 ? 'question-current' : ''}`;
                questionElement.innerHTML = `
                    <div class="flex gap-8 items-start">
                        <span class="flex-shrink-0 size-14 rounded-xl ${index === 0 ? 'bg-primary text-obsidian' : 'bg-primary/20 text-primary'} flex items-center justify-center font-black text-2xl shadow-[0_0_20px_rgba(0,245,212,0.4)]">
                            ${(index + 1).toString().padStart(2, '0')}
                        </span>
                        <h4 class="text-3xl font-bold leading-tight text-white tracking-tight">${questionData.question}</h4>
                    </div>
                    <div class="grid grid-cols-2 gap-4 ml-22 pl-[88px]">
                        ${['A', 'B', 'C', 'D'].map((letter, i) => `
                            <button class="text-left p-6 rounded-xl border border-primary/20 bg-primary/5 hover:bg-primary/20 hover:border-primary/50 transition-all flex items-start gap-4 group">
                                <span class="flex-shrink-0 size-8 rounded-lg bg-obsidian flex items-center justify-center text-primary font-black border border-primary/20 group-hover:border-primary/60">${letter}</span>
                                <div class="text-lg text-white/80 group-hover:text-white flex-1">${questionData.options[i] || `Option ${letter}`}</div>
                            </button>
                        `).join('')}
                    </div>
                `;
                questionElement.dataset.index = index;
                questionsList.appendChild(questionElement);
            });
            
            // Reset timer
            resetTimer();
            
            // Reset scroll position of questions container
            const questionsContainer = document.getElementById('questions-container');
            if (questionsContainer) {
                questionsContainer.scrollTop = 0;
            }
        }

        // Update completed cards UI
        function updateCompletedCards() {
            cards.forEach(card => {
                const cardId = card.id;
                const cardNumber = parseInt(cardId.split('-')[1]);
                if (state.completedRounds.includes(cardNumber)) {
                    card.classList.add('locked-card');
                } else {
                    card.classList.remove('locked-card');
                }
            });
        }

        // Timer functions
        function startTimer() {
            if (state.isTimerRunning) return;
            
            state.isTimerRunning = true;
            pauseTimerBtn.innerHTML = '<span class="material-symbols-outlined align-middle mr-2 text-sm">pause</span>Pause Timer';
            
            state.timerInterval = setInterval(() => {
                state.timeLeft--;
                updateTimerDisplay();
                
                // Timer color changes
                if (state.timeLeft <= 20) {
                    timerDisplay.classList.add('timer-warning');
                }
                if (state.timeLeft <= 10) {
                    timerDisplay.classList.remove('timer-warning');
                    timerDisplay.classList.add('timer-danger');
                }
                
                // Timer finished
                if (state.timeLeft <= 0) {
                    timerFinished();
                }
            }, 1000);
        }

        function toggleTimer() {
            if (state.isTimerRunning) {
                pauseTimer();
            } else {
                startTimer();
            }
        }

        function pauseTimer() {
            if (!state.isTimerRunning) return;
            
            state.isTimerRunning = false;
            clearInterval(state.timerInterval);
            pauseTimerBtn.innerHTML = '<span class="material-symbols-outlined align-middle mr-2 text-sm">play_arrow</span>Resume Timer';
        }

        function resetTimer() {
            pauseTimer();
            state.timeLeft = 90;
            updateTimerDisplay();
            timerDisplay.classList.remove('timer-warning', 'timer-danger');
            
            // Reset progress bar to default color
            timerProgress.classList.remove('bg-yellow-500', 'bg-red-500');
            timerProgress.classList.add('bg-primary');
            
            pauseTimerBtn.innerHTML = '<span class="material-symbols-outlined align-middle mr-2 text-sm">pause</span>Pause Timer';
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(state.timeLeft / 60);
            const seconds = state.timeLeft % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Update progress bar and text
            const progress = (state.timeLeft / 90) * 100;
            timerProgress.style.width = `${progress}%`;
            progressText.textContent = `STABILITY: ${Math.round(progress)}%`;
            
            // Reset color classes first
            timerProgress.classList.remove('bg-yellow-500', 'bg-red-500');
            
            // Change progress bar color when time is low
            if (state.timeLeft <= 20 && state.timeLeft > 10) {
                timerProgress.classList.add('bg-yellow-500');
            } else if (state.timeLeft <= 10) {
                timerProgress.classList.add('bg-red-500');
            } else {
                timerProgress.classList.add('bg-primary');
            }
        }

        function timerFinished() {
            pauseTimer();
            
            // Mark round as completed
            if (state.activeCardId && !state.completedRounds.includes(state.activeCardId)) {
                state.completedRounds.push(state.activeCardId);
                localStorage.setItem('chemQuiz2026_completedRounds', JSON.stringify(state.completedRounds));
                updateCompletedCards();
            }
            
            // Show toast notification instead of alert
            showToast(`TIME EXPIRED - CARD ${state.activeCardId} LOCKED`);
            
            // Close modal
            closeModal();
        }

        // Question navigation
        function nextQuestion() {
            if (!state.activeCardId) return;
            
            const totalQuestions = quizData[state.activeCardId].questions.length;
            
            if (state.currentQuestionIndex < totalQuestions - 1) {
                // Remove current class from previous question
                const previousQuestion = questionsList.querySelector(`[data-index="${state.currentQuestionIndex}"]`);
                if (previousQuestion) {
                    previousQuestion.classList.remove('question-current');
                    const previousNumber = previousQuestion.querySelector('span');
                    previousNumber.classList.remove('bg-primary', 'text-obsidian');
                    previousNumber.classList.add('bg-primary/20', 'text-primary');
                }
                
                // Move to next question
                state.currentQuestionIndex++;
                
                // Add current class to new question
                const currentQuestion = questionsList.querySelector(`[data-index="${state.currentQuestionIndex}"]`);
                if (currentQuestion) {
                    currentQuestion.classList.add('question-current');
                    const currentNumber = currentQuestion.querySelector('span');
                    currentNumber.classList.remove('bg-primary/20', 'text-primary');
                    currentNumber.classList.add('bg-primary', 'text-obsidian');
                    
                    // Scroll to current question
                    currentQuestion.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }
        }
        // Previous Question function
        function prevQuestion() {
            if (!state.activeCardId) return;
            
            if (state.currentQuestionIndex > 0) {
                // Remove current class from current question
                const currentQuestion = questionsList.querySelector(`[data-index="${state.currentQuestionIndex}"]`);
                if (currentQuestion) {
                    currentQuestion.classList.remove('question-current');
                    const currentNumber = currentQuestion.querySelector('span');
                    currentNumber.classList.remove('bg-primary', 'text-obsidian');
                    currentNumber.classList.add('bg-primary/20', 'text-primary');
                }
                
                // Move to previous question
                state.currentQuestionIndex--;
                
                // Add current class to new question
                const previousQuestion = questionsList.querySelector(`[data-index="${state.currentQuestionIndex}"]`);
                if (previousQuestion) {
                    previousQuestion.classList.add('question-current');
                    const previousNumber = previousQuestion.querySelector('span');
                    previousNumber.classList.remove('bg-primary/20', 'text-primary');
                    previousNumber.classList.add('bg-primary', 'text-obsidian');
                    
                    // Scroll to previous question
                    previousQuestion.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }
        }

        // End round button
        function endRound() {
            if (confirm("Are you sure you want to end this round? This will lock the card permanently.")) {
                // Stop audio immediately
                if (currentAudio) {
                    currentAudio.pause();
                    currentAudio.currentTime = 0;
                    currentAudio = null;
                }
                
                // Mark round as completed
                if (state.activeCardId && !state.completedRounds.includes(state.activeCardId)) {
                    state.completedRounds.push(state.activeCardId);
                    localStorage.setItem('chemQuiz2026_completedRounds', JSON.stringify(state.completedRounds));
                    updateCompletedCards();
                }
                
                // Show toast notification
                showToast(`CARD ${state.activeCardId} MANUALLY LOCKED`);
                
                // Close modal
                closeModal();
            }
        }

        // Close modal
        function closeModal() {
            // Stop any playing audio
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
                currentAudio = null;
            }
            
            // Hide modal
            quizModal.classList.add('hidden');
            quizModal.classList.remove('flex');
            
            // Reset progress bar color
            timerProgress.classList.remove('bg-yellow-500', 'bg-red-500');
            timerProgress.classList.add('bg-primary');
            
            // Reset footer status
            footerCardStatus.textContent = "Ready for Selection";
            
            // Reset state
            state.activeCardId = null;
            state.currentQuestionIndex = 0;
            
            // Reset scroll position of questions container
            const questionsContainer = document.getElementById('questions-container');
            if (questionsContainer) {
                questionsContainer.scrollTop = 0;
            }
        }

        // Master reset
        function masterReset() {
            if (confirm("This will reset ALL rounds and clear all progress. Are you sure?")) {
                // Stop any playing audio
                if (currentAudio) {
                    currentAudio.pause();
                    currentAudio.currentTime = 0;
                    currentAudio = null;
                }
                
                // Reset state
                state.completedRounds = [];
                localStorage.removeItem('chemQuiz2026_completedRounds');
                
                // Reset UI
                updateCompletedCards();
                closeModal();
                
                // Reset timer
                resetTimer();
                
                // Show toast notification instead of alert
                showToast("ALL ROUNDS RESET - SYSTEM READY");
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
